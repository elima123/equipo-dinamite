<!DOCTYPE html>
    <head>
        <%- include('./../includes/head.html') %>
        <link rel="stylesheet" href="/proj-styles.css">
        <title>Proyecto: <%= proyectoObject.IDProyecto %></title>
        <script src="https://code.highcharts.com/highcharts.js"></script>
        <script src="https://code.highcharts.com/highcharts-more.js"></script>
        <script src="https://code.highcharts.com/modules/solid-gauge.js"></script>
    </head>
    <body>
        <nav class="universal-nav">
            <div class="flex-1">
                <a href="/usuarios/homePage">
                    &lt;Regresar
                </a>
                <img src="/fonts/logo_color.png" alt="Appix">
            </div>
            <div class="flex-2">
                <p><%= user.name %>:</p>
                <p><%= user.rol %></p>
            </div>
        </nav>

        <ul class="nav nav-tabs">
            <li class="nav-item">
              <a class="nav-link active" id="navtab-1" aria-current="page" onclick="viewInfo()">Info de Proyecto</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" id="navtab-2" onclick="viewRiesgos()">Info Riesgos</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" id="navtab-3" onclick="viewAnalisis()">Analisis</a>
            </li>
        </ul>

        <div class="general-view">
            <div class="flex-3" style="margin: 0 3rem 2rem 3rem; width: 85%;">
                <h1><%= proyectoObject.Nombre %></h1>
                <button role="none" class="button-close">Cerrar Proyecto</button>
            </div>

            <div class="flex-3">
              <div class="f-50">
                <h5 class="card-subtitle mb-2 text-body-secondary" style="margin: 0 3rem 2rem 3rem;">
                  Cliente: <%= proyectoObject.nombreEmpresa %>
                </h5><br>
              </div>
              <!-- <div class="powerbi-date-range">
                <div>
                  <p><%= proyectoObject.start %></p>
                  <p><%= proyectoObject.end %></p>
                </div>
                <div>
                  <p class=""></p>
                  <p id="date-line"></p>
                  <p class=""></p>
                </div>
              </div> -->
            </div>

            <div class="flex-3" style="width: 95%; border: solid black 2px;">
              <div class="card" style="flex-basis: 40%; border: solid red 2px;">
                <div class="card-body" >
                  <h5 class="card-title">Descripcion</h5>
                  <p class="card-text" style="width: 100%;">
                    <%= proyectoObject.Descripcion %>
                  </p>
                </div>
                <h6 class="card-subtitle mb-2" style="margin-left: 1rem;">Riesgos</h6>
                <ul class="list-group list-group-flush">
                  <% riesgos.forEach(riesgo => { %>
                    <li class="list-group-item"><%= riesgo.IDRiesgo %>: <%= riesgo.Riesgo %></li>  
                  <% }) %>
                </ul>
              </div>
              <div style="flex-basis: 50%; border: solid green 2px; padding-left: 2rem;">
                <div>
                  <div class="powerbi-date-range">
                    <p style="display: inline-block;"><%= proyectoObject.start %></p>
                    <p style="display: inline-block;"><%= proyectoObject.end %></p>
                  </div>
                  <div id="range-div" style="width: 100%;"></div>
                </div>
                <div id="container-viable" style="border: solid black 2px; width: 80%; max-height: 80%; display: inline-block;"></div>
              </div>
            </div>
        </div>

        <div class="riesgos-view hidden">
          <div class="flex-3" style="margin: 0 3rem 2rem 3rem; width: 85%;">
            <h1><%= proyectoObject.Nombre %></h1>
            <!-- <button role="none" class="button-edit">Editar Riesgos</button> -->
            <button class="button-20">
              <!-- <svg xmlns="http://www.w3.org/2000/svg" width="20" viewBox="0 0 20 20" height="20" fill="none" class="svg-icon"><g stroke-width="1.5" stroke-linecap="round" stroke="#de8a2a"><circle r="7.5" cy="10" cx="10"></circle><path d="m9.99998 7.5v5"></path><path d="m7.5 9.99998h5"></path></g></svg> -->
              <span class="label">Editar Riesgos</span>
            </button>
        </div>
          <h4>Riesgos Anotados</h4>
          <table class="table table-striped" style="margin-bottom: 3rem;">
            <thead>
              <tr>
                <th scope="col">IDRiesgo</th>
                <th scope="col">Riesgo</th>
                <th scope="col">Categoria</th>
                <th scope="col">Probabilidad</th>
                <th scope="col">Impacto</th>
                <th scope="col">Estrategia</th>
              </tr>
            </thead>
            <tbody>
                <% riesgos.forEach(riesgo => { %>
                  <tr >
                      <td><%= riesgo.IDRiesgo %></td>
                      <td><%= riesgo.Riesgo %></td>
                      <td><%= riesgo.Categoria %></td>
                      <td><%= riesgo.Probabilidad %></td>
                      <td><%= riesgo.Impacto %></td>
                      <td><%= riesgo.Estrategia %></td>
                  </tr>
              <% }) %>
            </tbody>
          </table>
        </div>

        <div class="analisis-view hidden">
          <div id="container" style="width: 50%; height: 400px;"></div>
          <div id="container-2" style="width: 50%; height: 400px;"></div>
        </div>
  
        <footer>
            <p style="display: inline-block">Powered by: </p>
            <img src="/imgs/dinamite_logo.png" width="240">
        </footer>
    </body>
    <%- include('./../proj-script.ejs') %>
</html>